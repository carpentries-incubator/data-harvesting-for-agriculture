I"Ïc<!-- JPN: updated fig path here manually for plots to show -->

<h2 id="assumptions----for-debugging"><font color="magenta">Assumptions -- FOR DEBUGGING</font></h2>

<ol>
  <li>
    <font color="magenta">Everybody has installed R and R studio</font>
  </li>
  <li>
    <font color="magenta">They have been able to run the install script we sent them and have all packages installed</font>
  </li>
  <li>
    <font color="magenta">They *do* need an intro to the layout of RStudio, and what everything does.</font>
  </li>
</ol>

<h2 id="getting-to-know-r-and-rstudio">Getting to know R and RStudio</h2>

<font color="magenta">A good bit of this might be more suitable to the Setup section as it's got a lot about the setup and running of Rstudio.</font>

<h3 id="outline-for-this-section"><font color="magenta">Outline for this section</font></h3>
<ol>
  <li>
    <font color="magenta">Let's open RStudio </font>
  </li>
  <li>
    <font color="magenta">Where is the console? (screen shot) Vocab: *console*</font>
  </li>
  <li>
    <font color="magenta">Let's use RStudio as a calculator by putting numbers into the console</font>
  </li>
</ol>

<p>In this episode we‚Äôll cover the basics of using R, which is a programming language for statistics, data analysis, and data visualization. In the past decade or so, R has become very popular in both science and business, largely because (1) it is free, and (2) thousands of people have written new code extending its functionality, and that code is also free. If you perform an analysis in R, you can share that analysis so that anyone in the world can reproduce it without having to purchase proprietary software.</p>

<p>If you‚Äôre already proficient with Excel, you will probably already know how to accomplish a lot of what we are doing in this episode using Excel instead of R. One reason why we are teaching you this material, however, is to get you comfortable with R since we will be using R for geospatial analysis (which is not so easy in Excel).</p>

<p>In this lesson, we will be making use of another software called ‚ÄúRStudio‚Äù as a way to interact with the programming language R.  RStudio makes writing our programs more user-friendly.  <strong>Some sort of analogy here would be grand</strong></p>

<p>We launch RStudio by double clicking on it‚Äôs icon, as we would with other software on our computers.  If this is the first time you have opened it, the entire left pane will be taken up by something called the <code class="highlighter-rouge">Console</code> that you can see as the left hand panel in the figure below:</p>

<p><img src="../fig/Rstudio_blank.png" alt="stuff" /></p>

<font color="magenta">Do we want a screen shot of this instead of the R code?  Or will this be enough of a "following along" type of thing that that sort of thing isn't necessary?</font>

<p>This has a prompt where commands can be entered.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="m">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">7</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 12
</code></pre></div></div>

<!-- JPN: here is a test plot you can uncomment if you wanna try it
I'm gonna trya thing


```r
plot(c(1,2,3), c(4,5,6))
```

![plot of chunk unnamed-chunk-2](../figure/unnamed-chunk-2-1.png)
-->

<!-- JPN: this is just a test to see if I get what is going on here

```r
data = read.csv('data/fertilizer_use.csv')
print(head(data))
```

```
##   Year Crop Nitrogen Phosphate Potash
## 1 1964 Corn     1623      1053    829
## 2 1965 Corn     2151      1336   1204
## 3 1966 Corn     2596      1626   1513
## 4 1967 Corn     3044      1857   1750
## 5 1968 Corn     3116      1855   1778
## 6 1969 Corn     3287      1789   1765
```
-->

<p>After you hit enter, you will see the result of the command.  Let‚Äôs try a few others:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Performing arithmetic</span><span class="w">
</span><span class="m">6</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 8
</code></pre></div></div>

<p>Whoa!  What did I do just there with this <code class="highlighter-rouge">#</code>?  This is called ‚Äúleaving a comment in your code‚Äù and everything following the <code class="highlighter-rouge">#</code>
symbol is called a <em>comment</em>. A
comment is a line, or part of a line, that is ignored by R.  This means you can
use comments to explain what is happening in the code or why you did something
a certain way.  Comments start with the <code class="highlighter-rouge">#</code> character, and can take up the
whole line or just the end of a line.  As we go through this workshop, I
encourage you to put lots of comments in your code. Think of them as a way to
take notes!  Here is an example of a comment at the end of a line while we are doing some arithematic:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="m">2</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="c1"># this raises two to the third power</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 8
</code></pre></div></div>

<h2 id="variables-in-r">Variables in R</h2>

<h3 id="outline-of-this-section"><font color="magenta">Outline of this Section</font></h3>

<ol>
  <li>
    <font color="magenta">what is a variable? Vocab: *variable*</font>
  </li>
  <li>
    <font color="magenta">how do we assign a variable? Vocab: *assign*</font>
  </li>
  <li>
    <font color="magenta">What can we do with this variable? -&gt; Generic manipulations (addition, multiplication, etc)</font>
    <ul>
      <li>
        <font color="magenta">for this, use a "real world" thing that farmers might be into... something something nitrogen levels?</font>
      </li>
    </ul>
  </li>
  <li>
    <font color="magenta">Talk about how this variable now shows up in the data area and have a screen shot of where that is</font>
  </li>
</ol>

<font color="magenta">I stole this bit from the Python Fundementals Episode, not sure if that is groovy or not.  I *think* its ok if we follow the rules of their license but we should double check. I also stole a few things from the R-fundementals workshop and so we need to credit them as well.</font>

<font color="magenta">Also I've left in the links to glossary references that may or may not be there - for example if you click on the "assign" link, it goes nowhere right now.</font>

<font color="magenta">Also, we should change this whole `weight_kg` thing into something that is more agri-centric?  I think?</font>

<p>This is great but not very interesting.
To do anything useful with data, we need to assign its value to a <em>variable</em>.
In R, we can <a href="../reference/#assign">assign</a> a value to a
<a href="../reference/#variable">variable</a>, by typing a little left arrow sign <code class="highlighter-rouge">&lt;-</code>.
For example, to assign value <code class="highlighter-rouge">60</code> to a variable <code class="highlighter-rouge">weight_kg</code>, we would execute:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">60</span><span class="w">
</span></code></pre></div></div>

<p>From now on, whenever we use <code class="highlighter-rouge">weight_kg</code>, R will substitute the value we assigned to
it. In layman‚Äôs terms, <strong>a variable is a name for a value</strong>.</p>

<p>In R, variable names:</p>

<ul>
  <li>can include letters, digits, and underscores</li>
  <li>cannot start with a digit</li>
  <li>are <a href="../reference/#case-sensitive">case sensitive</a>.</li>
</ul>

<p>This means that, for example:</p>
<ul>
  <li><code class="highlighter-rouge">weight0</code> is a valid variable name, whereas <code class="highlighter-rouge">0weight</code> is not</li>
  <li><code class="highlighter-rouge">weight</code> and <code class="highlighter-rouge">Weight</code> are different variables</li>
</ul>

<font color="magenta">Also from the R-programming workshop, possibly said another way:</font>

<blockquote class="callout">
  <h2 id="variable-naming-conventions">Variable Naming Conventions</h2>

  <p>Historically, R programmers have used a variety of conventions for naming variables. The <code class="highlighter-rouge">.</code> character
in R can be a valid part of a variable name; thus the above assignment could have easily been <code class="highlighter-rouge">weight.kg &lt;- 57.5</code>.
This is often confusing to R newcomers who have programmed in languages where <code class="highlighter-rouge">.</code> has a more significant meaning.
Today, most R programmers 1) start variable names with lower case letters, 2) separate words in variable names with
underscores, and 3) use only lowercase letters, underscores, and numbers in variable names. The book <em>R Packages</em> includes
a <a href="http://r-pkgs.had.co.nz/style.html">chapter</a> on this and other style considerations.</p>
</blockquote>

<h3 id="types-of-data">Types of data</h3>

<font color="magenta">Do we need to get into datatypes here?  Or can we just skip it and get into it when we look at an actual dataset that has columns of different datatypes?</font>

<p>R knows various types of data. The ones you are likely to come across are:</p>

<ul>
  <li>integer numbers (whole numbers)</li>
  <li>floating point numbers (numbers with decimals), and</li>
  <li>names or words that sort data into ‚Äúcategories‚Äù <font color="magenta">(maybe something better here?)  Save types of data until we get into the columns stuff?</font></li>
</ul>

<p>In the example above, variable <code class="highlighter-rouge">weight_kg</code> has an integer value of <code class="highlighter-rouge">60</code>.
To create a variable with a floating point value, we can execute:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">60.0</span><span class="w">
</span></code></pre></div></div>

<font color="magenta">Here I don't know if we should get into the print function right now like they do in the Python lesson or not</font>

<font color="magenta">I also don't know if we want to use "&lt;-" all the time or the "=" sign.  I *feel* like "=" is more intiuative but I'm not 100% sure on that one, could be my Python bias showing :)</font>

<p>We can do arithematic with variables like we did with numbers before:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Performing arithmetic with our variable: multiply it by a factor of 2.2</span><span class="w">
</span><span class="n">weight_kg</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2.2</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 132
</code></pre></div></div>
<!-- weight in lbs = 2.2 x weight in kg -->

<p>The above command, however, did not change the value of <code class="highlighter-rouge">weight_kg</code>:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 60
</code></pre></div></div>

<p>To change the value of the <code class="highlighter-rouge">weight_kg</code> variable, we have to
<strong>assign</strong> <code class="highlighter-rouge">weight_kg</code> a new value using the equals <code class="highlighter-rouge">&lt;-</code> sign:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">60.0</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2.2</span><span class="w">
</span><span class="n">weight_kg</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 132
</code></pre></div></div>

<blockquote class="callout">
  <h2 id="variables-as-sticky-notes">Variables as Sticky Notes</h2>

  <p>A variable is analogous to a sticky note with a name written on it:
assigning a value to a variable is like putting that sticky note on a particular value.</p>

  <p><img src="../fig/python-sticky-note-variables-01.svg" alt="Variables as Sticky Notes" /></p>

  <p>This means that assigning a value to one variable does <strong>not</strong> change
values of other variables.
For example, let‚Äôs store the subject‚Äôs weight in pounds in its own variable:</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># There are 2.2 pounds per kilogram</span><span class="w">
</span><span class="n">weight_lb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">2.2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">weight_kg</span><span class="w">
</span><span class="n">weight_kg</span><span class="w">
</span></code></pre></div>  </div>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 132
</code></pre></div>  </div>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_lb</span><span class="w">
</span></code></pre></div>  </div>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 290.4
</code></pre></div>  </div>

  <p><img src="../fig/python-sticky-note-variables-02.svg" alt="Creating Another Variable" /></p>

  <p>Let‚Äôs now change <code class="highlighter-rouge">weight_kg</code>:</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_kg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">100.0</span><span class="w">
</span><span class="n">weight_kg</span><span class="w">
</span></code></pre></div>  </div>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 100
</code></pre></div>  </div>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">weight_lb</span><span class="w">
</span></code></pre></div>  </div>

  <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## [1] 290.4
</code></pre></div>  </div>
  <p>We can see that even though we updated <code class="highlighter-rouge">weight_kg</code>, the variable <code class="highlighter-rouge">weight_lb</code> was not changed.</p>

  <p><img src="../fig/python-sticky-note-variables-03.svg" alt="Updating a Variable" /></p>

  <p>Since <code class="highlighter-rouge">weight_lb</code> doesn‚Äôt ‚Äúremember‚Äù where its value comes from,
it is not updated when we change <code class="highlighter-rouge">weight_kg</code>.</p>
</blockquote>

<font color="magenta">Note: there is another way of explaining this in the R lesson:</font>
<p><a href="http://swcarpentry.github.io/r-novice-inflammation/01-starting-with-data/index.html">http://swcarpentry.github.io/r-novice-inflammation/01-starting-with-data/index.html</a></p>

<font color="magenta">Do we want to have this example for them too or just get right into scripts and whatnot?</font>

<blockquote class="challenge">
  <h2 id="assigning-values-to-variables">Assigning Values to Variables</h2>

  <p>Draw diagrams showing what variables refer to what values after each statement in the following program:</p>

  <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mass</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">47.5</span><span class="w">
</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">122</span><span class="w">
</span><span class="n">mass</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mass</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2.0</span><span class="w">
</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></code></pre></div>  </div>

  <blockquote class="solution">
    <h2 id="solution">Solution</h2>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mass</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">47.5</span><span class="w">
</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">122</span><span class="w">
</span></code></pre></div>    </div>

    <p><img src="../fig/mass-age-assign-1.svg" alt="Assigning Variables" /></p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mass</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mass</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2.0</span><span class="w">
</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></code></pre></div>    </div>

    <p><img src="../fig/mass-age-assign-2.svg" alt="Assigning Variables" /></p>

  </blockquote>
</blockquote>

<h2 id="writing-and-savings-r-scripts">Writing and Savings R Scripts</h2>

<font color="magenta">NOTE: I'm wondering if we want to push this section to later -- i.e. if we want to just go right to "getting your data into R" and do some examples just using the console and then start worrying about saving files later in the day once they have some cool plots that they made with R that they might want to reproduce.</font>

<h3 id="outline-of-this-section-1"><font color="magenta">Outline of this section</font></h3>
<ol>
  <li>
    <font color="magenta">Analogy - scripting is like writing a set of instructions, a letter, something. Vocab: *scripts/scripting* </font>
  </li>
  <li>
    <font color="magenta">Where do we write scripts in RStudio - screen shot of window, a screen shot of what to do if there is only the console and no script - how do you open a script interface </font>
  </li>
  <li>
    <font color="magenta">Redo stuff with variable in script (nitrogen levels calculation), but call it something different</font>
  </li>
  <li>
    <font color="magenta">How to run a script - Run vs. Source -&gt; they are in the same place!  Screenshot of this. Vocab: *running a script*</font>
  </li>
  <li>
    <font color="magenta">Point out that it shows up in the data-listing place</font>
  </li>
  <li>
    <font color="magenta">~~How do we find out the value of our new variable that we wrote in a script?~~</font>
    <ol>
      <li>
        <font color="magenta">~~Using the console like before - because in RStudio the console and scripting interface are linked! (this is not true in other things like PyCharm... this is slightly an aside though so use an aside thing)~~</font>
      </li>
      <li>
        <font color="magenta">~~Using a print statement - emphasize that you *have* to use print in the script to see the variable!~~</font>
      </li>
    </ol>
  </li>
  <li>
    <font color="magenta">How to save our script -&gt; where does it save to?</font>
  </li>
  <li>
    <font color="magenta">Closing and re-opening a script to re-run.</font>
  </li>
</ol>

<p>Now that we have some idea of what kinds of calculations we want to do in R, we might want to know how to save our work.  We do this in something called a <em>script</em> which is essentially a list of instructions that will tell R what to do, in the order we give them.</p>

<p>We can open up a <em>script file</em> where we will type in all our instructions by going to the little green plus at the top left of RStudio and selecting ‚ÄúR Script‚Äù from the dropdown menu <font color="magenta">(this was for a Mac, not sure if its different for windows)</font>:</p>

<p><img src="../fig/opening_script_in_Rstudio.png" alt="Opening a script in Rstudio" /></p>

<p>In our new scripting window, we can type the commands that we had worked through before into this script and then tell R to do the calculation by putting our cursor on the last line (end of line 3) and pressing the ‚ÄúRun‚Äù button in the upper right corner of the scripting window:</p>

<p><img src="../fig/output_script_save-02.png" alt="Run a script" /></p>

<font color="magenta">Do we want to teach them about Source vs. Run at this point? </font>

<p>You can see that these variable names have now popped up in the <em>Global Environment</em> window at the upper left ‚Äì this is a way we can keep track of our variables as we run our scripts.</p>

<p>Finally, we want to be able to save all of our hard work!  We can do this like we would save any file on our computer, but make sure you put it in a place were you‚Äôll remember on your computer</p>
<font color="magenta">(do we need screen shots?  I assume everybody knows how to save a file and how to choose where to save it but maybe this isn't 100% correct?)</font>
<p>.</p>

<p>You‚Äôll note now that the little upper tab on the left of the scripting window has the file name I chose, but with the extension <code class="highlighter-rouge">.R</code>.  This is the extension of an R-script and it means that its in a format that R can execute.</p>

<p><img src="../fig/output_script_save-03.png" alt="save a script" /></p>

<p>If you close this file and want to re-open it, you can use <code class="highlighter-rouge">File -&gt; Open File...</code> to open it up in R. <font color="magenta">(This could be different on a Windows, also not sure how much detail we want here and if we want a screen shot or not)</font></p>

<h2 id="optional-what-is-a-function">OPTIONAL: What is a function?</h2>

<font color="magenta">Not 100% sure we want to go into this much detail, but we could do a thing here where we put everything we just did with our variable into a function.  I think this might be too much at this point, and maybe if we get them into writing their own functions we can circle back around to this.</font>

<h2 id="getting-your-data-into-r">Getting your data into R</h2>

<ol>
  <li>Let‚Äôs talk about the dataset we are going to use here ‚Äì facts about this dataset</li>
  <li>This is what this dataset looks like (show snapshot of csv)</li>
  <li>To get this data into R where we can do math to it like we did with our variable above we have to do something called ‚Äúreading in our data‚Äù.  To do this, we‚Äôll use something called a <em>function</em> to assign a variable the value of this table ‚Äì i.e. we want a variable that will store all the rows and columns of our dataset
    <ul>
      <li>Talk a bit about what a function is here ‚Äì omelets? Vocab: <em>function</em></li>
      <li>we also have to talk about the fact that we give the file name as a parameter to this function. Vocab: <em>function parameter</em></li>
    </ul>
  </li>
</ol>

<h3 id="explore-your-data-in-r-could-be-part-of-previous-or-own-thing-not-sure">Explore your data in R (could be part of previous or own thing, not sure)</h3>

<ol>
  <li>Another function example: using <code class="highlighter-rouge">str()</code> to look at your data real quick</li>
  <li>Also show how to look at your data in R (like ‚ÄúView(data)‚Äù)? Maybe?  Or you can click on it?</li>
</ol>

<h2 id="doing-stuff-with-data-in-r-better-name-obvs">Doing stuff with data in R (better name obvs)</h2>

<ol>
  <li>Your data is stored as a special thing called a dataframe - explain what this is. Vocab: <em>dataframe</em></li>
  <li>We can access the columns of your tabular dataset with a $ thing</li>
  <li>We can access the rows of your tabular dataset with ‚Ä¶ (not sure we wanna do this)</li>
  <li>We can manipulate columns with functions
    <ul>
      <li>example: min function (or something)</li>
      <li>How to learn about functions you might want to use? ‚Äì&gt; teach googling &amp; how to look up info about functions in R</li>
    </ul>
  </li>
</ol>

:ET