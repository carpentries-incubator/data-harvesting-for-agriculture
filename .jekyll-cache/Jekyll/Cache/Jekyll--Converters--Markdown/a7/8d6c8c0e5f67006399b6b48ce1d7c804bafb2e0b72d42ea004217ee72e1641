I"ô<h4 id="motivating-questions">Motivating Questions:</h4>
<ul>
  <li>What are the common file types in agricultural data?</li>
  <li>What applications do I need to open these files?</li>
  <li>How can I make maps of my yield or application?</li>
</ul>

<h4 id="objectives-with-spatial-data">Objectives with Spatial Data:</h4>
<ul>
  <li>Determine whether data are stored in vector or raster format</li>
  <li>Identify the coordinate system for a dataset</li>
  <li>Talk about when data don‚Äôt have a projection defined (missing .prj file)</li>
  <li>Determine UTM zone of a dataset</li>
  <li>Reproject the dataset into UTM</li>
  <li>Import geospatial files into your R environment</li>
  <li>Visualize geospatial data with R</li>
  <li>Create geospatial files from lat/long coordinates</li>
  <li>Create an ab-line</li>
</ul>

<h4 id="keypoints">Keypoints:</h4>
<ul>
  <li>sf is prefereable for data analysis; it is easier to access the dataframe</li>
  <li>Projecting your data in utm is necessary for many of the geometric operations
you perform (e.g. making trial grids and splitting plots into subplot data)</li>
  <li>Different data formats that you are likely to encounter include gpkg, shp
(cpg, dbf, prj, sbn, sbx), geojson, and tif</li>
</ul>

<h3 id="setup">Setup</h3>

<p>Below are the packages that we will use in this episode.</p>

<p>###Introducing Spatial Data with an Example Using Trial Design Data</p>

<p>####Read in the trial design</p>

<p>Use the function <code class="highlighter-rouge">read_sf()</code> to bring the dataset into your R environment.
Because we have already set the working directory for this file, we only need to
supply the file name. There are many functions for reading files into the
environment, but this function will create an object of class <code class="highlighter-rouge">sf</code>. This class
makes accessing spatial data much easier. Much like a data frame, you can access
variables within an <code class="highlighter-rouge">sf</code> object using the <code class="highlighter-rouge">$</code> operator, for example
<code class="highlighter-rouge">trial$DISTANCE</code>. For this and other reasons like the number of spatial
calculations available for <code class="highlighter-rouge">sf</code> objects, this class is perferred in most situations.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">trial</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_sf</span><span class="p">(</span><span class="s2">"data/trialdesign.gpkg"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>An <code class="highlighter-rouge">sf</code> object contains a geometry column. We can see the geometric points for
each polygon.
In geospatial terms, a polygon represents an area of land with distinct
boundaries represented by a series of points.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">trial</span><span class="o">$</span><span class="n">geom</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Geometry set for 6 features 
## geometry type:  POLYGON
## dimension:      XY
## bbox:           xmin: -81.97862 ymin: 41.74608 xmax: -81.97743 ymax: 41.74659
## epsg (SRID):    4326
## proj4string:    +proj=longlat +datum=WGS84 +no_defs
## First 5 geometries:
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## POLYGON ((-81.97853 41.74656, -81.97853 41.7463...
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## POLYGON ((-81.97832 41.74657, -81.9783 41.74608...
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## POLYGON ((-81.9781 41.74659, -81.97808 41.74609...
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## POLYGON ((-81.97788 41.74658, -81.97787 41.7460...
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## POLYGON ((-81.97767 41.74658, -81.97765 41.7460...
</code></pre></div></div>

<p>####What is a projection?</p>

<p>Geospatial data has a coordinate reference system (CRS) that projects the map in
a specific location. A projection is a way of making the earth‚Äôs curved surface fit into something you 
can represent on a flat computer screen. To understand why that matters, take a look
at the difference between <a href="https://en.wikipedia.org/wiki/Mercator_projection#/media/File:Mercator_projection_Square.JPG">the Mercator projection</a> of the world and the 
<a href="https://en.wikipedia.org/wiki/Boggs_eumorphic_projection#/media/File:Boggs_eumorphic_projection_SW.JPG">Boggs eumorphic projection</a></p>

<p>In the Mercator projection, space that doesn‚Äôt exist is created to make a ‚Äúflat‚Äù map 
and Greenland and Antarctica disproportionately huge. In the Boggs projection, strategic 
slices are cut out of the ocean so that the sizes appear a bit closer to true, but Canada 
and Russia get pinched and Greenland gets bisected. There will always be some compromises 
made in a projection system that converts curved surfaces to flat ones for the same reason 
that it‚Äôs difficult to make an orange peel lie flat. So the method you select will have an 
effect on your outcome.</p>

<p>####Check the coordinate reference system</p>

<p>Some coordinate reference systems, such as UTM zones, are
measured in meters from a reference point in the zone. Latitude and longitude
represent a different type of CRS, defined in terms of angles across a sphere.
Before combining files
and performing operations on a file, it is important to check the CRS. The
function for this is <code class="highlighter-rouge">st_crs().</code></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">st_crs</span><span class="p">(</span><span class="n">trial</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Coordinate Reference System:
##   EPSG: 4326 
##   proj4string: "+proj=longlat +datum=WGS84 +no_defs"
</code></pre></div></div>

:ET